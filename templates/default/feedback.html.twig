<!DOCTYPE html>
<html lang="fr">
<head>
    <!-- Balises meta pour définir l'encodage et l'échelle d'affichage -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Titre de la page -->
    <title>Témoignages - Ecoride</title>
    <!-- Liens vers les feuilles de style -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ asset('css/styles.css') }}">
    <link rel="stylesheet" href="{{ asset('css/feedback.css') }}">
</head>
<body>
    <header>
        <div>
            <img src="{{ asset('images/logo.png') }}" alt="EcoRide" class="logo">
            <h1>EcoRide</h1>
        </div>
        <!-- Bouton de menu pour les appareils mobiles -->
        <div class="menu-toggle">&#9776;</div>
        <!-- Navigation -->
        <nav>
            <a href="{{ path('app_default_home') }}">Accueil</a>
            <a href="{{ path('trajets') }}">Trajets</a>
            <a href="{{ path('app_default_services') }}">Services</a>
            <a href="{{ path('app_default_contact') }}">Contact</a>
            <a class="active" href="{{ path('feedback') }}">Témoignages</a>
            <a href="{{ path('app_login') }}">Connexion</a>
        </nav>
    </header>
    <!-- Contenu principal -->
    <div class="container">
        <!-- Titre principal de la section Témoignages -->
        <div class="big-title">
            <img src="{{ asset('images/forest.jpg') }}" alt="Témoignages" class="full-width-image">
            <div class="big-title-overlay"></div>
            <h2>Témoignages</h2>
        </div>
        <!-- Section des avis sous forme de cartes -->
            <div class="feedback-cards">
                <div class="row">
                    {% for feedback in feedbacks %}
                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">{{ feedback.postedBy }}</h5>
                                <p class="card-text">{{ feedback.comment }}</p>
                                <p class="card-text"><small class="text-muted">Note: {{ feedback.rating }}/10</small></p>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>

        <!-- Formulaire pour laisser un témoignage -->
        <div class="leave-feedback">
            <div class="container">
                <h3 class="text-center mb-4">Laissez votre témoignage</h3>
                <form action="{{ path('api_feedbacks_new') }}" method="post" id="feedback-form">
                    <div class="mb-3">
                        <label for="authorName" class="form-label">Nom</label>
                        <input type="text" class="form-control" id="authorName" name="authorName" required>
                    </div>
                    <div class="mb-3">
                        <label for="rating" class="form-label">Note sur 10</label>
                        <input type="number" class="form-control" id="rating" name="rating" min="1" max="10" required> 
                    </div>
                    <div class="mb-3">
                        <label for="message" class="form-label">Message</label>
                        <textarea class="form-control" id="message" name="message" rows="4" required></textarea>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-success btn-lg">Envoyer</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Pied de page -->
    <footer>
        <div class="container-footer">
            <div class="footer-section">
                Agissez face à la pollution !
            </div>
            <div class="footer-section">
                <h4>Ensemble, vers une mobilité plus verte.</h4>
            </div>
            <div class="footer-section">
                <a href="{{ path('app_default_contact') }}">Nous contacter</a>
            </div>
        </div>
        <div class="copyright">
            <!-- Droits d'auteur -->
            <p>Tous droits réservés &copy; 2025 Ecoride</p>
        </div>
    </footer>
    <!-- Script JavaScript pour la bascule du menu mobile -->
    <script src="{{ asset('js/menu.js') }}"></script>
    <!-- Script pour charger les icônes Font Awesome -->
    <script src="https://kit.fontawesome.com/8bd5dfedd7.js" crossorigin="anonymous"></script>
    <!-- Ajoutez ce script à la fin de votre fichier feedback.html.twig -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.querySelector('#feedback-form');

            form.addEventListener('submit', function(event) {
                event.preventDefault();
                // Affichez le message de confirmation
                alert('Témoignage soumis !');

                // Soumettez le formulaire
                this.submit();
            });
            
        });
    </script>
</body>
</html>
